"use strict";var express=require("express"),mysql=require("mysql2"),app=express(),cors=require("cors"),port=3e3;app.use(cors({origin:"http://localhost:8100"})),app.use(express.json());var db=mysql.createConnection({host:"localhost",user:"root",password:"root",database:"DreamsApp"});db.connect(function(a){a?console.error("Error al conectar a la base de datos:",a.stack):console.log("Conectado a la base de datos MySQL.")}),app.get("/api/data/:table",function(a,r){var o=a.params.table;db.query("SELECT * FROM ??",[o],function(a,o){a?r.status(500).json({error:"Error al ejecutar la consulta"}):r.json(o)})}),app.get("/api/promosheladeria/active",function(a,r){db.query("SELECT * FROM PromosHeladeria WHERE Activo = 1",function(a,o){if(a)return console.error("Error al ejecutar la consulta:",a),void r.status(500).json({error:"Error al ejecutar la consulta"});r.json(o)})}),app.get("/api/data/:table/:id",function(a,r){var o=a.params,e=o.table,t=o.id;db.query("SELECT * FROM ?? WHERE id = ?",[e,t],function(a,o){a?r.status(500).json({error:"Error al ejecutar la consulta"}):0!==o.length?r.json(o[0]):r.status(404).json({error:"Dato no encontrado"})})}),app.post("/api/data/:table",function(a,r){var o=a.params.table,e=a.body.name;if(!e)return r.status(400).json({error:"El campo name es requerido"});db.query("INSERT INTO ?? (nombre) VALUES (?)",[o,e],function(a,o){a?r.status(500).json({error:"Error al insertar datos"}):r.status(201).json({id:o.insertId,name:e})})}),app.put("/api/data/:table/:id",function(a,r){var o=a.params,e=o.table,t=o.id,s=a.body.name;if(!s)return r.status(400).json({error:"El campo name es requerido"});db.query("UPDATE ?? SET nombre = ? WHERE id = ?",[e,s,t],function(a,o){a?r.status(500).json({error:"Error al actualizar datos"}):0!==o.affectedRows?r.json({id:t,name:s}):r.status(404).json({error:"Dato no encontrado"})})}),app.delete("/api/data/:table/:id",function(a,r){var o=a.params,e=o.table,t=o.id;db.query("DELETE FROM ?? WHERE id = ?",[e,t],function(a,o){a?r.status(500).json({error:"Error al eliminar datos"}):0!==o.affectedRows?r.status(204).send():r.status(404).json({error:"Dato no encontrado"})})}),app.get("/api/complementos",function(a,r){var o=a.query.table;if(!o)return r.status(400).json({error:"El par√°metro 'table' es requerido"});var e="";"Cubatas"===o?e="SELECT * FROM Complementos_Cubata":"Helados Personalizados"===o?e="SELECT * FROM Complementos_Helado":"Cafes"===o?e="SELECT Nombre,Precio FROM Complementos_Cafe ":"Bolleria"===o?e="SELECT Nombre,Precio FROM Complementos_Bolleria ":"Ginebras"===o?e="SELECT * FROM Complementos_Gins ":"Infusiones"===o&&(e="SELECT * FROM Complementos_Infusiones "),db.query(e,[o],function(a,o){a?r.status(500).json({error:"Error al ejecutar la consulta"}):r.json(o)})}),app.get("/api/productos/:tableName/:productName/ncomplementos",function(a,r){var o=a.params,e=o.tableName,t=o.productName;db.query("SELECT Ncomplementos FROM ?? WHERE Nombre = ?",[e,t],function(a,o){if(a)return console.error("Error al ejecutar la consulta:",a),void r.status(500).json({error:"Error al ejecutar la consulta"});0!==o.length?r.json({Ncomplementos:o[0].Ncomplementos}):r.status(404).json({error:"Producto no encontrado"})})}),app.get("/api/tables",function(a,e){db.query("SHOW TABLES",function(a,o){if(a)e.status(500).json({error:"Error al obtener las tablas"});else{var r=o.map(function(a){return Object.values(a)[0]});e.json(r)}})}),app.get("/api/tables/:tableName",function(a,r){var o=a.params.tableName;db.query("SELECT * FROM ??",[o],function(a,o){a?r.status(500).json({error:"Error al obtener los datos de la tabla"}):r.json(o)})}),app.put("/api/tables/:tableName/:id",function(a,r){var o=a.params.tableName,e=a.params.id,t=a.body;db.query("UPDATE ?? SET ? WHERE id = ?",[o,t,e],function(a,o){a?r.status(500).json({error:"Error al actualizar los datos"}):r.json({message:"Datos actualizados correctamente"})})}),app.listen(port,function(){console.log("Servidor corriendo en http://localhost:".concat(port))});
//# sourceMappingURL=server.min.js.map
