"use strict";var express=require("express"),mysql=require("mysql2"),app=express(),cors=require("cors"),port=3e3;app.use(cors({origin:"http://192.168.1.41:4200"})),app.use(express.json());var db=mysql.createConnection({host:"localhost",user:"root",password:"root",database:"DreamsApp"});db.connect(function(a){a?console.error("Error al conectar a la base de datos:",a.stack):console.log("Conectado a la base de datos MySQL.")}),app.get("/api/data/:table",function(a,o){var r=a.params.table;db.query("SELECT * FROM ??",[r],function(a,r){a?o.status(500).json({error:"Error al ejecutar la consulta"}):o.json(r)})}),app.get("/api/data/:table/:id",function(a,o){var r=a.params,t=r.table,e=r.id;db.query("SELECT * FROM ?? WHERE id = ?",[t,e],function(a,r){a?o.status(500).json({error:"Error al ejecutar la consulta"}):0!==r.length?o.json(r[0]):o.status(404).json({error:"Dato no encontrado"})})}),app.get("/api/data/:table",function(a,o){var r=a.params.table;r?(console.log("Consultando todos los datos de la tabla: ".concat(r)),db.query("SELECT * FROM ??",[r],function(a,r){if(a)return console.error("Error al ejecutar la consulta:",a),void o.status(500).json({error:"Error al ejecutar la consulta"});0!==r.length?o.json(r):o.status(404).json({error:"Datos no encontrados"})})):o.status(400).json({error:"Parámetro inválido"})}),app.post("/api/data/:table",function(a,o){var r=a.params.table,t=a.body.name;if(!t)return o.status(400).json({error:"El campo name es requerido"});db.query("INSERT INTO ?? (nombre) VALUES (?)",[r,t],function(a,r){a?o.status(500).json({error:"Error al insertar datos"}):o.status(201).json({id:r.insertId,name:t})})}),app.put("/api/data/:table/:id",function(a,o){var r=a.params,t=r.table,e=r.id,s=a.body.name;if(!s)return o.status(400).json({error:"El campo name es requerido"});db.query("UPDATE ?? SET nombre = ? WHERE id = ?",[t,s,e],function(a,r){a?o.status(500).json({error:"Error al actualizar datos"}):0!==r.affectedRows?o.json({id:e,name:s}):o.status(404).json({error:"Dato no encontrado"})})}),app.delete("/api/data/:table/:id",function(a,o){var r=a.params,t=r.table,e=r.id;db.query("DELETE FROM ?? WHERE id = ?",[t,e],function(a,r){a?o.status(500).json({error:"Error al eliminar datos"}):0!==r.affectedRows?o.status(204).send():o.status(404).json({error:"Dato no encontrado"})})}),app.listen(port,function(){console.log("Servidor corriendo en http://localhost:".concat(port))});
//# sourceMappingURL=server.min.js.map
