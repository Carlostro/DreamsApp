"use strict";var express=require("express"),mysql=require("mysql2"),app=express(),cors=require("cors"),port=3e3;app.use(cors({origin:"http://localhost:8100"})),app.use(express.json());var db=mysql.createConnection({host:"localhost",user:"root",password:"root",database:"DreamsApp"});db.connect(function(a){a?console.error("Error al conectar a la base de datos:",a.stack):console.log("Conectado a la base de datos MySQL.")}),app.get("/api/data/:table",function(a,o){var r=a.params.table;db.query("SELECT * FROM ??",[r],function(a,r){a?o.status(500).json({error:"Error al ejecutar la consulta"}):o.json(r)})}),app.get("/api/data/:table/:id",function(a,o){var r=a.params,e=r.table,t=r.id;db.query("SELECT * FROM ?? WHERE id = ?",[e,t],function(a,r){a?o.status(500).json({error:"Error al ejecutar la consulta"}):0!==r.length?o.json(r[0]):o.status(404).json({error:"Dato no encontrado"})})}),app.post("/api/data/:table",function(a,o){var r=a.params.table,e=a.body.name;if(!e)return o.status(400).json({error:"El campo name es requerido"});db.query("INSERT INTO ?? (nombre) VALUES (?)",[r,e],function(a,r){a?o.status(500).json({error:"Error al insertar datos"}):o.status(201).json({id:r.insertId,name:e})})}),app.put("/api/data/:table/:id",function(a,o){var r=a.params,e=r.table,t=r.id,s=a.body.name;if(!s)return o.status(400).json({error:"El campo name es requerido"});db.query("UPDATE ?? SET nombre = ? WHERE id = ?",[e,s,t],function(a,r){a?o.status(500).json({error:"Error al actualizar datos"}):0!==r.affectedRows?o.json({id:t,name:s}):o.status(404).json({error:"Dato no encontrado"})})}),app.delete("/api/data/:table/:id",function(a,o){var r=a.params,e=r.table,t=r.id;db.query("DELETE FROM ?? WHERE id = ?",[e,t],function(a,r){a?o.status(500).json({error:"Error al eliminar datos"}):0!==r.affectedRows?o.status(204).send():o.status(404).json({error:"Dato no encontrado"})})}),app.get("/api/complementos",function(a,o){var r=a.query.table;if(!r)return o.status(400).json({error:"El par√°metro 'table' es requerido"});var e="";"Cubatas"===r?e="SELECT * FROM Complementos_Cubata":"Helados Personalizados"===r?e="SELECT * FROM Complementos_Helado":"Cafes"===r&&(e="SELECT Nombre,Precio FROM Complementos_Cafe "),db.query(e,[r],function(a,r){a?o.status(500).json({error:"Error al ejecutar la consulta"}):o.json(r)})}),app.get("/api/productos/:tableName/:productName/ncomplementos",function(a,o){var r=a.params,e=r.tableName,t=r.productName;db.query("SELECT Ncomplementos FROM ?? WHERE Nombre = ?",[e,t],function(a,r){if(a)return console.error("Error al ejecutar la consulta:",a),void o.status(500).json({error:"Error al ejecutar la consulta"});0!==r.length?o.json({Ncomplementos:r[0].Ncomplementos}):o.status(404).json({error:"Producto no encontrado"})})}),app.get("/api/tables",function(a,e){db.query("SHOW TABLES",function(a,r){if(a)e.status(500).json({error:"Error al obtener las tablas"});else{var o=r.map(function(a){return Object.values(a)[0]});e.json(o)}})}),app.get("/api/tables/:tableName",function(a,o){var r=a.params.tableName;db.query("SELECT * FROM ??",[r],function(a,r){a?o.status(500).json({error:"Error al obtener los datos de la tabla"}):o.json(r)})}),app.put("/api/tables/:tableName/:id",function(a,o){var r=a.params.tableName,e=a.params.id,t=a.body;db.query("UPDATE ?? SET ? WHERE id = ?",[r,t,e],function(a,r){a?o.status(500).json({error:"Error al actualizar los datos"}):o.json({message:"Datos actualizados correctamente"})})}),app.listen(port,function(){console.log("Servidor corriendo en http://localhost:".concat(port))});
//# sourceMappingURL=server.min.js.map
